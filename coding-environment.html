<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Serve IDE - Replit Style</title>
    <link href="coding-environment.css" rel="stylesheet" type="text/css" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
</head>
<body>
    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-animation">
            <div class="replit-logo">
                <div class="logo-square"></div>
                <div class="logo-square"></div>
                <div class="logo-square"></div>
                <div class="logo-square"></div>
            </div>
            <div class="loading-text">Loading Smart Serve IDE...</div>
            <div class="progress-bar">
                <div class="progress-fill"></div>
            </div>
        </div>
    </div>

    <!-- Top Navigation Bar -->
    <div class="top-navbar">
        <div class="navbar-left">
            <div class="home-btn" onclick="redirectToBuilder()">
                <i class="fas fa-home"></i>
                <span>Smart Serve</span>
            </div>
            <div class="project-info">
                <i class="fas fa-code-branch"></i>
                <span id="projectName">My Bot Project</span>
                <div class="project-status">
                    <div class="status-dot online"></div>
                    <span>Ready</span>
                </div>
            </div>
        </div>

        <div class="navbar-center">
            <div class="run-controls">
                <button class="run-btn" onclick="runCode()">
                    <i class="fas fa-play"></i>
                    <span>Run</span>
                </button>
                <button class="stop-btn" onclick="stopCode()" style="display: none;">
                    <i class="fas fa-stop"></i>
                    <span>Stop</span>
                </button>
            </div>
        </div>

        <div class="navbar-right">
            
            <button class="action-btn" onclick="downloadProject()">
                <i class="fas fa-download"></i>
                <span>Download ZIP</span>
            </button>
            <div class="user-profile-mini">
                <img src="https://via.placeholder.com/32x32/ffffff/000000?text=U" alt="Profile" id="userAvatarMini" />
            </div>
        </div>
    </div>

    <!-- Main IDE Container -->
    <div class="ide-layout">
        <!-- Sidebar -->
        <div class="sidebar">
            <!-- AI Assistant Panel -->
            <div class="sidebar-section ai-section">
                <div class="section-header ai-header">
                    <div class="ai-indicator">
                        <div class="ai-pulse"></div>
                        <i class="fas fa-robot"></i>
                    </div>
                    <span>AI Assistant</span>
                    <div class="ai-status online">
                        <div class="status-dot"></div>
                    </div>
                </div>
                <div class="ai-chat-container">
                    <div class="ai-messages" id="aiMessages">
                        <div class="ai-message assistant">
                            <div class="ai-avatar">
                                <i class="fas fa-robot"></i>
                            </div>
                            <div class="message-content">
                                <div class="typing-indicator">
                                    <span></span>
                                    <span></span>
                                    <span></span>
                                </div>
                                <div class="message-text">
                                    Hello! I'm your AI coding assistant. I can help you build amazing Discord bots. Ask me anything about:
                                    <ul>
                                        <li>ü§ñ Bot development</li>
                                        <li>üìù Code generation</li>
                                        <li>üêõ Bug fixing</li>
                                        <li>‚ö° Performance optimization</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="ai-input-section">
                        <div class="ai-input-container">
                            <input type="text" id="aiInput" placeholder="Ask AI about bot development..." />
                            <div class="input-actions">
                                <button class="attachment-btn" onclick="attachFiles()" title="Attach Files">
                                    <i class="fas fa-paperclip"></i>
                                </button>
                                <button class="send-btn" id="aiSendBtn" onclick="sendAIMessage()">
                                    <i class="fas fa-paper-plane"></i>
                                </button>
                            </div>
                        </div>
                        <div class="ai-suggestions">
                            <button class="suggestion-chip" onclick="quickAsk('Create a moderation bot')">
                                üõ°Ô∏è Moderation bot
                            </button>
                            <button class="suggestion-chip" onclick="quickAsk('Add music commands')">
                                üéµ Music features
                            </button>
                            <button class="suggestion-chip" onclick="quickAsk('Fix my code')">
                                üîß Debug code
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- File Explorer -->
            <div class="sidebar-section">
                <div class="section-header">
                    <i class="fas fa-folder"></i>
                    <span>Files</span>
                    <div class="section-actions">
                        <button class="icon-btn" onclick="createNewFile()" title="New File">
                            <i class="fas fa-file-plus"></i>
                        </button>
                        <button class="icon-btn" onclick="createNewFolder()" title="New Folder">
                            <i class="fas fa-folder-plus"></i>
                        </button>
                        <button class="icon-btn" onclick="uploadFiles()" title="Upload Files">
                            <i class="fas fa-upload"></i>
                        </button>
                        <input type="file" id="fileUpload" multiple style="display: none;" onchange="handleFileUpload(event)">
                    </div>
                </div>
                <div class="file-explorer" id="fileExplorer">
                    <div class="empty-state" id="emptyState">
                        <div class="empty-icon">
                            <i class="fas fa-file-code"></i>
                        </div>
                        <div class="empty-text">No files yet</div>
                        <div class="empty-subtext">Create your first file to get started</div>
                    </div>
                </div>
            </div>

            <!-- Package Manager -->
            <div class="sidebar-section package-section">
                <div class="section-header">
                    <i class="fas fa-cube"></i>
                    <span>Packages</span>
                    <div class="section-actions">
                        <button class="icon-btn" onclick="addPackage()" title="Add Package">
                            <i class="fas fa-plus"></i>
                        </button>
                    </div>
                </div>
                <div class="package-list" id="packageList">
                    <div class="package-item">
                        <i class="fab fa-node-js"></i>
                        <span>discord.js</span>
                        <span class="package-version">v14.0.0</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Editor Area -->
            <div class="editor-area">
                <div class="tab-container">
                    <div class="tabs" id="tabContainer">
                        <!-- Tabs will be dynamically added -->
                    </div>
                    <div class="tab-actions">
                        <button class="icon-btn" onclick="createNewFile()">
                            <i class="fas fa-plus"></i>
                        </button>
                    </div>
                </div>

                <div class="editor-container" id="editorContainer">
                    <div class="welcome-screen" id="welcomeScreen">
                        <div class="welcome-content">
                            <div class="welcome-icon">
                                <i class="fas fa-rocket"></i>
                            </div>
                            <h2>Welcome to Smart Serve IDE</h2>
                            <p>Create your first file to start coding</p>
                            <div class="quick-actions">
                                <button class="quick-btn" onclick="createFileOfType('python')">
                                    <i class="fab fa-python"></i>
                                    <span>New Python File</span>
                                </button>
                                <button class="quick-btn" onclick="createFileOfType('javascript')">
                                    <i class="fab fa-js-square"></i>
                                    <span>New JavaScript File</span>
                                </button>
                                <button class="quick-btn" onclick="createFileOfType('text')">
                                    <i class="fas fa-file-alt"></i>
                                    <span>New Text File</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Console/Output Panel -->
            <div class="console-panel">
                <div class="console-header">
                    <div class="console-tabs">
                        <div class="console-tab active" data-panel="console">
                            <i class="fas fa-terminal"></i>
                            <span>Console</span>
                        </div>
                        <div class="console-tab" data-panel="output">
                            <i class="fas fa-list-alt"></i>
                            <span>Output</span>
                        </div>
                        <div class="console-tab" data-panel="problems">
                            <i class="fas fa-exclamation-triangle"></i>
                            <span>Problems</span>
                            <span class="tab-badge">0</span>
                        </div>
                    </div>
                    <div class="console-actions">
                        <button class="icon-btn" onclick="clearConsole()">
                            <i class="fas fa-trash"></i>
                        </button>
                        <button class="icon-btn" onclick="toggleConsole()">
                            <i class="fas fa-chevron-down"></i>
                        </button>
                    </div>
                </div>

                <div class="console-content">
                    <div class="console-view active" data-panel="console">
                        <div class="terminal-output" id="terminalOutput">
                            <div class="terminal-line">
                                <span class="terminal-prefix">smartserve@ide:~$</span>
                                <span class="terminal-cursor">|</span>
                            </div>
                        </div>
                    </div>

                    <div class="console-view" data-panel="output">
                        <div class="output-content" id="outputContent">
                            <div class="output-line">
                                <span class="output-time">[Ready]</span>
                                <span class="output-text">Console ready for output...</span>
                            </div>
                        </div>
                    </div>

                    <div class="console-view" data-panel="problems">
                        <div class="problems-content">
                            <div class="no-problems">
                                <i class="fas fa-check-circle"></i>
                                <span>No problems detected</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- File Creation Modal -->
    <div class="modal-overlay" id="fileModal">
        <div class="modal">
            <div class="modal-header">
                <h3>Create New File</h3>
                <button class="icon-btn" onclick="closeModal('fileModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>File Name</label>
                    <input type="text" id="fileName" placeholder="main.py" />
                </div>
                <div class="form-group">
                    <label>File Type</label>
                    <select id="fileType">
                        <option value="python">Python (.py)</option>
                        <option value="javascript">JavaScript (.js)</option>
                        <option value="text">Text File (.txt)</option>
                        <option value="env">Environment (.env)</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn secondary" onclick="closeModal('fileModal')">Cancel</button>
                <button class="btn primary" onclick="createFile()">Create</button>
            </div>
        </div>
    </div>

    <script src="coding-environment.js"></script>
</body>
</html>